
<template name="spdxLicense">
  {{#with getLicenseData spdxid }}
  <strong>{{spdxid}}</strong>
  <ul>
    <li>Name {{name}}</li>
    <li>Url: {{url}}</li>
    <li>osiApproved: {{boolString osiApproved}}</li>
  </ul>
  {{/with}}
</template>

<template name="AnalysisBlock">
  <div class="row">
    <div class="col-sm-1">
      <div class="thumbnail">
        <img class="img-responsive user-photo" src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png">
      </div>
    </div>
    <div class="col-sm-10">
      <div class="panel panel-default">
        <div class="panel-heading">
        <strong>{{getRealName submittedBy}}</strong> <span class="text-muted">commented xxx days ago</span>
        </div>
        <div class="panel-body">
          <div>Compatibility: {{compatibility}} </div>
          <div>Comments:
            <div>{{comments}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="quickForm_MatrixForm">
  <legend>License Compatibility Form</legend>
  {{#if $exists atts.doc.verifiedBy }}
    <div>Verified by {{verifiedBy}}</div>
    <div>These information are verified and cannot be changed.</div>
  {{/if}}
  <div class="row">
    <div class="col-md-5">{{> spdxLicense spdxid=atts.doc.spdxid1 }}</div>
    <div class="col-md-5">{{> spdxLicense spdxid=atts.doc.spdxid2 }}</div>
  </div>
  {{#unless $exists atts.doc.analysis }}
    <div>Nobody has submitted information about these licences. Be the first !</div>
    {{#unless currentUser}}Please log in to edit.{{/unless}}
  {{/unless}}
    {{#if currentUser }}
      <div class="row">
        <div class="col-md-12">
          {{#autoForm id="MatrixForm" type="update-pushArray" collection="LicenseMatrix" doc=exampleDoc scope="analysis"}}
            <fieldset>
              <legend>Licence Analysis</legend>
                  {{> afQuickFields }}
                    <div><button type="submit" class="btn btn-primary">Submit</button></div>
            </fieldset>
          {{/autoForm}}
        </div>
      </div>
    {{/if}}
    <hr/>
    {{#each atts.doc.analysis }}
      {{> AnalysisBlock }}
    {{/each}}
</template>
